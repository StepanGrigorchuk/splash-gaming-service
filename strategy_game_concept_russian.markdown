# Концепция пошаговой стратегической игры для "SPLASH"

## 1. Обзор
Эта пошаговая стратегическая игра разработана для веб-сервиса "SPLASH", с акцентом на расслабление, простоту и эстетику для казуальных игроков 16–40 лет. Игра представляет собой поле размером 256x256 клеток, управляемое мышью, с экономикой на основе двух ресурсов (монеты и кирпичи). Игроки и ИИ-враг строят здания, создают юнитов и соревнуются в стратегических задачах, сохраняя минималистичный и успокаивающий интерфейс.

## 2. Основные механики
### Игровое поле
- **Размер**: 256x256 клеток (65,536 клеток), отображается область 20x20 клеток для оптимизации производительности.
- **Навигация**: Перемещение (перетаскивание мышью) и масштабирование (колесо мыши) с плавными переходами через WebGL.
- **Мини-карта**: В углу экрана отображается вся карта с маркером текущей области и возможностью клика для навигации.
- **Оптимизация**: Отрисовка только видимых клеток с использованием тайловой системы, загрузка <3 секунд в современных браузерах.

### Ресурсы
- **Типы**: Монеты (для покупки юнитов и зданий) и Кирпичи (для строительства).
- **Сбор ресурсов**:
  - Пассивный доход от зданий (см. ниже).
  - Нейтральные ресурсные точки (шахты для кирпичей, рынки для монет) на карте, которые можно захватить юнитами для бонусов (+1 монета или кирпич за ход).
- **Лимит хранения**: Максимум 100 монет и 100 кирпичей, чтобы стимулировать стратегические траты.
- **Начальные ресурсы**: Игрок и ИИ начинают с 30 монет и 30 кирпичей.

### Здания
Игроки и ИИ могут строить четыре типа зданий (добавлена стена для разнообразия):
1. **Рынок**:
   - Стоимость: 20 Кирпичей
   - Эффект: Производит 2 Монеты за ход
   - Время строительства: 1 ход
2. **Завод**:
   - Стоимость: 20 Монет
   - Эффект: Производит 2 Кирпича за ход
   - Время строительства: 1 ход
3. **Казарма**:
   - Стоимость: 40 Монет, 40 Кирпичей
   - Эффект: Позволяет производить юнитов (см. Юниты)
   - Время строительства: 2 хода
4. **Стена** (добавлено):
   - Стоимость: 10 Кирпичей
   - Эффект: Блокирует движение вражеских юнитов; уничтожается после 2 атак
   - Время строительства: 1 ход

### Юниты
Юниты создаются в казармах и перемещаются по полю для атаки или захвата:
1. **Солдат**:
   - Стоимость: 10 Монет, 10 Кирпичей
   - Движение: 4 клетки за ход (только по ортогональным направлениям)
   - Способность: Уничтожает вражеские здания при контакте (1 ход на уничтожение)
   - Время производства: 1 ход
2. **Разведчик** (добавлено):
   - Стоимость: 5 Монет, 5 Кирпичей
   - Движение: 8 клеток за ход (только по ортогональным направлениям)
   - Способность: Захватывает нейтральные ресурсные точки, но не может уничтожать здания
   - Время производства: 1 ход

### Бои
- Юниты уничтожают вражеские здания, перемещаясь к ним вплотную и тратя 1 ход.
- Стены блокируют движение юнитов и требуют 2 атак для уничтожения.
- Прямых боев между юнитами нет, чтобы сохранить простоту для казуальных игроков.

### Ходы
- **Структура хода**: Игрок и ИИ по очереди:
  1. Собирают ресурсы с зданий и точек.
  2. Строят или улучшают здания.
  3. Производят юнитов в казармах.
  4. Перемещают юнитов (каждый юнит движется один раз за ход).
- **Лимит ходов**: Опционально 50 ходов за матч, чтобы избежать затяжных партий.

## 3. ИИ-враг
- **Поведение**:
  - Пассивный режим: Фокус на строительстве рынков и заводов, минимальное производство юнитов.
  - Сбалансированный режим: Строит все типы зданий и производит юнитов для захвата точек и атаки.
  - Агрессивный режим: Приоритет на казармы и солдат для атаки игрока.
- **Уровни сложности**:
  - Легкий: Пассивный ИИ, медленное строительство.
  - Средний: Сбалансированный ИИ, умеренный темп.
  - Сложный: Агрессивный ИИ, быстрое строительство и производство юнитов.
- **Логика ИИ**: Простое дерево решений, учитывающее действия игрока и доступные ресурсы.

## 4. Цели и условия победы
- **Основная цель**: Уничтожить все здания врага.
- **Альтернативные цели** (выбираются случайным образом для каждого матча):
  - Захватить центральную "Точку Победы" на 5 ходов.
  - Накопить 500 Монет или Кирпичей.
- **Условия поражения**: Все здания игрока уничтожены или достигнут лимит ходов без выполнения целей.
- **Кампания**: 3–5 сценариев с уникальными картами (например, открытое поле, узкие проходы) и типами врагов.

## 5. Пользовательский опыт (UX)
- **Управление**: Полностью через мышь:
  - Клик для выбора зданий/юнитов, перетаскивание для размещения или движения.
  - Колесо мыши для масштабирования, перетаскивание для перемещения поля.
  - Дополнительные сочетания клавиш (например, стрелки для перемещения, +/- для масштаба).
- **Обучение**: Всплывающее руководство при первом запуске, объясняющее сбор ресурсов, строительство и движение юнитов (с возможностью пропуска).
- **Сохранение прогресса**:
  - Локальное сохранение через localStorage (например, текущий ход, ресурсы).
  - Опциональное облачное сохранение через Firebase для зарегистрированных пользователей.
- **Достижения**:
  - Примеры: "Построй 5 Рынков", "Победи за 20 ходов", "Захвати 3 ресурсные точки".
  - Отображаются на опциональной странице профиля.

## 6. Дизайн и эстетика
- **Визуальный стиль**:
  - Минималистичная палитра пастельных цветов (мягкие зеленые, голубые, бежевые).
  - Чистые, сеточные визуальные элементы с простыми формами (например, квадраты для зданий, круги для юнитов).
  - Ненавязчивые анимации (например, свечение при сборе ресурсов, плавное движение юнитов).
- **Шрифты**: Inter или Roboto для читаемости.
- **Иконки**: Font Awesome или Material Icons для элементов интерфейса (например, кнопки, меню).
- **Темы**: Светлый и темный режимы, переключаемые в настройках.
- **Аудио**: Опциональные мягкие звуковые эффекты (например, легкие клики при строительстве, фоновая музыка), с возможностью отключения.

## 7. Технические характеристики
- **Платформа**: Браузерная игра на HTML5, CSS3, JavaScript.
- **Библиотека**: Phaser.js для отрисовки сетки, движения юнитов и анимаций.
- **Отрисовка**: WebGL для плавного масштабирования и перемещения, с тайловой системой для оптимизации 256x256 поля.
- **Хранение данных**: LocalStorage для локального сохранения, Firebase для облачного (опционально).
- **Производительность**: Целевое время загрузки <3 секунд, оптимизация для ПК среднего уровня.
- **Безопасность**: Валидация входных данных для защиты от XSS, минимальный сбор данных (только для облачных сохранений с согласия).

## 8. Доступность
- **Поддержка клавиатуры**: Стрелки для перемещения, +/- для масштаба, Enter для выбора.
- **Визуальная доступность**: Режим высокого контраста, крупные шрифты, палитра, учитывающая дальтонизм.
- **Поддержка экранных читалок**: ARIA-метки для элементов интерфейса (например, кнопки, меню).

## 9. Баланс и настройка
- **Стоимость ресурсов**:
  - Рынок: 20 Кирпичей, 2 Монеты за ход.
  - Завод: 20 Монет, 2 Кирпича за ход.
  - Казарма: 40 Монет, 40 Кирпичей.
  - Стена: 10 Кирпичей.
  - Солдат: 10 Монет, 10 Кирпичей.
  - Разведчик: 5 Монет, 5 Кирпичей.
- **Темп игры**:
  - Движение солдатов — 4 клетки за ход, чтобы замедлить бои и стимулировать стратегию.
  - Лимит хранения (100 Монет, 100 Кирпичей) предотвращает быстрое накопление.
- **Тестирование**: Моделирование матчей для проверки баланса ресурсов (например, ~10 ходов для строительства казармы).

## 10. Повторная играбельность и вовлеченность
- **Разнообразие**: Случайные компоновки карт (например, размещение ресурсных точек, препятствия).
- **Достижения**: Награды за стратегические этапы и исследования.
- **Режим кампании**: Несколько сценариев с нарастающей сложностью.
- **Уровни сложности**: Легкий, средний, сложный для разных уровней игроков.

## 11. Интеграция с "SPLASH"
- **Элемент каталога**: Отображается как карточка в каталоге игр с миниатюрой, названием ("Стратегический Форпост") и описанием ("Стройте, расширяйтесь и перехитрите врага в расслабляющей стратегии").
- **Соответствие UX**: Минималистичный дизайн, успокаивающие цвета, интуитивное управление.
- **Будущие функции**:
  - Мультиплеер (после MVP) для матчей игрок против игрока.
  - Интеграция с соцсетями для публикации достижений или результатов.
  - Адаптация для мобильных устройств с сенсорным управлением.

## 12. План разработки
- **Прототипирование (1 месяц)**:
  - Использовать GitHub Copilot для создания базового кода на Phaser.js для сетки, зданий и юнитов.
  - Разработать макеты интерфейса в Figma с пастельной палитрой и минималистичным дизайном.
- **Разработка (2 месяца)**:
  - Реализовать основные механики (ресурсы, здания, юниты, ИИ).
  - Оптимизировать отрисовку для 256x256 поля.
- **Тестирование (1 месяц)**:
  - Провести UX-тестирование с 10–20 пользователями для оценки навигации и вовлеченности.
  - Проверить производительность (<3с загрузка) и кроссбраузерную совместимость.
- **Запуск**: Разместить на Vercel или Netlify, интегрировать в каталог "SPLASH".
- **После запуска**: Добавить новые сценарии, улучшить баланс, внедрить мультиплеер (через 3–6 месяцев).

## 13. Риски и минимизация
- **Проблемы с производительностью (большое поле)**:
  - Использовать тайловую отрисовку и WebGL.
  - Тестировать на ПК среднего уровня.
- **Низкая вовлеченность**:
  - Добавить обучение, достижения и разнообразные сценарии.
  - Собирать обратную связь через формы в игре.
- **Ошибки в коде от ИИ**:
  - Проверять код от Copilot через JSHint.
  - Тестировать крайние случаи (например, максимальный лимит ресурсов, тупики ИИ).

## 14. Метрики успеха
- **Уникальные игроки**: 500+ ежемесячных пользователей в течение 3 месяцев после запуска.
- **Время сессии**: Среднее 10 минут за сессию, за счет увлекательных механик.
- **Частота возвращений**: 40% игроков возвращаются в течение 7 дней, благодаря новым сценариям.
- **Обратная связь**: 80%+ положительных отзывов об UX и эстетике.